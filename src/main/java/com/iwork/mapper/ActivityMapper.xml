<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"
        "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
<mapper namespace="com.iwork.mapper.ActivityMapper">
    <insert id="addActivity" parameterType="com.iwork.bean.Activity">
        insert into activity(
        activity_id,
        activity_create_user_id,
        activity_create_time,
        activity_type,
        activity_title,
        activity_context
        ) values(
        #{activityId},
        #{activityCreateUserId},
        #{activityCreateTime},
        #{activityType},
        #{activityTitle},
        #{activityContext}
        )
    </insert>
    

    <select id="listWelfares" resultMap="welfareResultMap">
        select * from activity join user on activity.activity_create_user_id = user.user_id where activity_type=1
    </select>
    <resultMap id="welfareResultMap" type="com.iwork.bean.Activity">
        <id property="activityId" column="activity_id"></id>
        <result property="activityCreateUserId" column="activity_create_user_id"></result>
        <result property="activityCreateTime" column="activity_create_time"></result>
        <result property="activityType" column="activity_type"></result>
        <result property="activityTitle" column="activity_title"></result>
        <result property="activityContext" column="activity_context"></result>
        <association property="user" column="user_id" javaType="com.iwork.bean.User">
            <id property="userId" column="user_id"></id>
            <result property="userName" column="user_name"></result>
        </association>
    </resultMap>

    <select id="selectActivity" parameterType="java.lang.String" resultMap="ActivityById">
        select * from activity where activity_id=#{id}
    </select>
    <resultMap id="ActivityById" type="com.iwork.bean.Activity">
        <id property="activityId" column="activity_id"></id>
        <result property="activityCreateUserId" column="activity_create_user_id"></result>
        <result property="activityCreateTime" column="activity_create_time"></result>
        <result property="activityType" column="activity_type"></result>
        <result property="activityTitle" column="activity_title"></result>
        <result property="activityContext" column="activity_context"></result>
    </resultMap>
</mapper>